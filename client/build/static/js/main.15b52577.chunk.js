(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(11),o=a.n(i),r=(a(123),a(124),a(7)),s=a(15),l=a.n(s),d=a(192),j=a(18),b=a(194),u=a(198),x=a(199),p=a(197),m=a(200),h=a(35),O=a(88),g=a.n(O),f=a(195),v=a(217),y=a(196),w=a(87),S=a.n(w),C=a(89),N=a.n(C),k=a(2),T=c.a.createContext(),I=c.a.createContext(),B=function(){return Object(n.useContext)(T)},z=function(){return Object(n.useContext)(I)},P=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(r.a)(a,2),i=c[0],o=c[1],s=function(){l.a.get("/api/user/validate",{withCredentials:!0}).then((function(e){401!==e.status?o(!0):o(!1)})).catch((function(e){console.log(e),o(!1)}))};return s(),Object(k.jsx)(T.Provider,{value:i,children:Object(k.jsx)(I.Provider,{value:s,children:t})})},W=a(12),E=Object(d.a)({root:{},cardAction:{display:"flex",flex:"1 0 auto",flexDirection:"column",textDecoration:"none",color:"black",fontWeight:"bold",marginTop:"5px",paddingTop:"0px"},card:{justifyContent:"start",display:"flex",flexDirection:"column",borderRadius:"10px",marginTop:"20px"},body:{wordWrap:"break-word"},actions:{display:"flex",justifyContent:"flex-start",background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)"},cardContent:{heigh:"300px",marginTop:"0px",paddingTop:"0px",paddingBottom:"0px",marginBotton:"0px"},cardHeader:{paddingBottom:"5px"}}),R=function(e){var t=E(),a=e.post,c=a.body,i=a.user,o=a._id,s=a.createdAt,d=a.comments,O=a.favoritesCount,w=Object(n.useState)(O),C=Object(r.a)(w,2),T=C[0],I=C[1],z=Object(n.useState)(!1),P=Object(r.a)(z,2),R=P[0],M=P[1],A=B();return Object(k.jsxs)(b.a,{className:t.card,children:[Object(k.jsx)(j.b,{className:t.cardAction,to:"/user/".concat(i._id),children:Object(k.jsx)(f.a,{className:t.cardHeader,avatar:Object(k.jsx)(v.a,{src:"https://picsum.photos/200","aria-label":"User"}),action:Object(k.jsx)(y.a,{"aria-label":"settings",children:Object(k.jsx)(S.a,{})}),title:Object(k.jsx)(h.a,{children:e.post.user.name}),subheader:s})}),Object(k.jsx)(j.b,{className:t.cardAction,to:"/posts/".concat(o),children:Object(k.jsx)(p.a,{className:t.cardContent,children:Object(k.jsx)(u.a,{children:Object(k.jsx)(h.a,{className:t.body,variant:"body2",color:"textPrimary",component:"p",children:c})})})}),Object(k.jsxs)(x.a,{className:t.actions,children:[!A&&R&&Object(k.jsx)(W.a,{to:"/signin"}),Object(k.jsxs)(m.a,{size:"small",color:"primary",onClick:function(){var e;e=o,A?l.a.post("/api/post/like-post",{postId:e},{withCredentials:!0}).then((function(e){console.log(e),"favorited"!==e.data?I(T-1):I(T+1)})).catch((function(e){console.log(e)})):M(!0)},children:[Object(k.jsx)(g.a,{style:{color:"red"}}),T]}),Object(k.jsx)(j.b,{to:"/posts/".concat(o),children:Object(k.jsxs)(m.a,{size:"small",color:"primary",children:[Object(k.jsx)(N.a,{style:{color:"#8f80ee"}})," ",d.length]})})]})]},"body + ".concat(Math.random()))},M=a(201),A=a(202),F=Object(d.a)({commentField:{position:"sticky",bottom:"0px",height:"80px"},gridItem:{},container:{marginTop:"20px"}}),L=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],i=F();return Object(n.useEffect)((function(){l.a.get("/api/post/get-feed").then((function(e){console.log(e),c(e.data)}))}),[]),Object(k.jsx)(M.a,{maxWidth:"xs",className:i.container,children:Object(k.jsx)(A.a,{container:!0,direction:"row",justify:"center",spacing:1,children:a&&a.map((function(e,t){return Object(k.jsx)(A.a,{className:i.gridItem,item:!0,xs:12,children:Object(k.jsx)(R,{post:e})},t+e.body)}))})})},D=a(215),U=a(216),_=a(203),V=a(218),H=a(204),q=a(206),G=a(90),J=a.n(G),Y=a(92),K=a.n(Y),Q=a(93),X=a.n(Q),Z=a(91),$=a.n(Z),ee=Object(d.a)((function(e){return{container:{marginTop:"25px",padding:"40px",background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)",borderRadius:"6px"},switch:{left:"0px",with:"100%"},switchText:{marginLeft:"17px"},root:{display:"grid","& > *":{margin:e.spacing(1)}}}})),te=function(){var e=ee(),t=Object(n.useState)(!0),a=Object(r.a)(t,2),c=a[0],i=a[1],o=Object(n.useState)(!1),s=Object(r.a)(o,2),d=s[0],j=s[1],b=Object(n.useState)(!1),u=Object(r.a)(b,2),x=u[0],p=u[1],O=Object(n.useState)(!1),g=Object(r.a)(O,2),f=g[0],v=g[1],w=z(),S=Object(n.useState)(""),C=Object(r.a)(S,2),N=C[0],T=C[1],I=Object(n.useState)(!1),B=Object(r.a)(I,2),P=B[0],E=B[1],R=Object(n.useState)(!1),M=Object(r.a)(R,2),F=M[0],L=M[1],G=Object(n.useState)(""),Y=Object(r.a)(G,2),Q=Y[0],Z=Y[1],te=Object(n.useState)(!1),ae=Object(r.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(n.useState)(!1),oe=Object(r.a)(ie,2),re=oe[0],se=oe[1],le=Object(n.useState)(!1),de=Object(r.a)(le,2),je=de[0],be=de[1];return Object(k.jsxs)(A.a,{container:!0,justify:"center",children:[d&&Object(k.jsx)(W.a,{to:"/"}),Object(k.jsxs)("div",{className:e.container,children:[Object(k.jsx)(h.a,{align:"center",variant:"h3",children:c?"Sign In":"Sign Up"}),Object(k.jsx)(h.a,{className:e.switchText,color:"textPrimary",align:"right",variant:"p3",children:c?"Don't have an account ?":"Do you need to sign in ?"}),Object(k.jsx)(V.a,{className:e.switch,checked:c,onChange:function(){i(!c)},color:"primary",name:"switch",inputProps:{"aria-label":"sign in sign up checkbox"}}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c?l.a.post("/api/signin",{username:e.target.email.value,password:e.target.password.value},{withCredentials:!0}).then((function(e){200===e.status&&(j(!0),w())})).catch((function(e){console.log(e),v(e.response.data.message)})):l.a.post("/api/signup",{email:e.target.email.value,password:e.target.password.value,username:e.target.username.value},{withCredentials:!0}).then((function(e){i(!0)})).catch((function(e){var t,a,n,c;console.log(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message),p(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)}))},className:e.root,noValidate:!0,autoComplete:"off",children:[Object(k.jsx)(D.a,{onChange:function(e){T(e.target.value),N.length>4&&L(!0),J()(N)?E(!0):E(!1)},id:"filled-basic",name:"email",label:"E-Mail",required:!0,variant:"filled",error:!c&&!P&&F,helperText:!c&&F&&!P&&"Email is not valid"}),!c&&Object(k.jsx)(D.a,{id:"username-input",name:"username",label:"User Name",variant:"filled"}),Object(k.jsxs)(H.a,{helperText:"password is too short",variant:"filled",children:[Object(k.jsx)(U.a,{htmlFor:"filled-adornment-password",children:"Password"}),Object(k.jsx)(_.a,{name:"password",required:!0,id:"filled-adornment-password",type:je?"text":"password",onChange:function(e){Z(e.target.value),Q.length>3&&se(!0),$()(Q,{min:8,max:32})?ce(!0):ce(!1)},error:!c&&!ne&&re,endAdornment:Object(k.jsx)(q.a,{position:"end",children:Object(k.jsx)(y.a,{"aria-label":"toggle password visibility",onClick:function(){be(!je)},edge:"end",children:je?Object(k.jsx)(K.a,{}):Object(k.jsx)(X.a,{})})})})]}),Object(k.jsx)(m.a,{type:"submit",variant:"contained",align:"center",color:"secondary",children:c?"Sign In":"Sign Up"}),c&&f,!c&&x]})]})]})},ae=Object(d.a)((function(e){return{container:{height:"190px",margin:"0px",padding:"40px",background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)"},switch:{left:"0px",margin:"0px"},root:{display:"grid","& > *":{margin:"0px"}},grid:{margin:"0px"}}})),ne=function(){var e=ae(),t=Object(n.useState)(!1),a=Object(r.a)(t,2),c=a[0],i=a[1];return Object(k.jsx)(A.a,{className:e.grid,container:!0,justify:"center",children:Object(k.jsxs)("div",{className:e.container,children:[c&&Object(k.jsx)(W.a,{to:"/posts/".concat(c)}),Object(k.jsxs)("form",{onSubmit:function(e){e.preventDefault(),l.a.post("/api/post/create",{body:e.target.body.value},{withCredentials:!0}).then((function(e){i(e.data.docs._id)})).catch((function(e){console.log(e)}))},className:e.root,noValidate:!0,autoComplete:"off",children:[Object(k.jsx)(D.a,{autoFocus:!0,rowsMax:8,multiline:!0,id:"filled-basic",name:"body",label:"body",variant:"filled"}),Object(k.jsx)(m.a,{type:"submit",variant:"contained",align:"center",color:"secondary",children:"Create Post"})]})]})})},ce=a(205),ie=a(161),oe=a(208),re=a(207),se=a(94),le=a.n(se),de=a(209),je=Object(d.a)((function(e){return{root:{width:"100%",backgroundColor:"hsl(194, 53.3%, 79%)",margin:"0 auto",borderRadius:"10px",marginTop:"20px"},body:{wordWrap:"break-word"}}})),be=function(e){var t=je();return Object(k.jsx)(k.Fragment,{children:0!==e.comments.length&&Object(k.jsx)(ce.a,{className:t.root,children:e.comments.map((function(t,a){return Object(k.jsxs)("div",{children:[Object(k.jsxs)(ie.a,{children:[Object(k.jsx)(re.a,{children:Object(k.jsx)(v.a,{children:Object(k.jsx)(le.a,{})})}),Object(k.jsx)(oe.a,{id:"comment-special-case",primary:t.commenterName,secondary:t.body})]}),0!==e.comments.length&&e.comments.length-1!==a&&Object(k.jsx)(de.a,{variant:"inset",component:"li"})]},t._id)}))})})},ue=Object(d.a)({root:{},cardAction:{display:"flex",flex:"1 0 auto",flexDirection:"column"},card:{marginTop:"30px"},body:{alignSelf:"end",textAlign:"center"},actions:{display:"flex",justifyContent:"flex-start"},commentField:{backgroundColor:"#b1e1cf",borderTopLeftRadius:"14px",borderTopRightRadius:"14px",paddingTop:"5%",marginTop:"20px"},button:{marginTop:"10px",marginBottom:"10px",padding:"8px",right:"-80%",left:"auto"}}),xe=function(e){var t=ue(),a=Object(W.g)().id,c=B(),i=Object(n.useState)(!1),o=Object(r.a)(i,2),s=o[0],d=o[1],j=Object(n.useState)(),b=Object(r.a)(j,2),u=b[0],x=b[1];Object(n.useEffect)((function(){l.a.get("/api/post/".concat(a)).then((function(e){d(e.data)})).catch((function(e){console.log(e)}))}),[]);return Object(k.jsx)(M.a,{className:t.card,maxWidth:"sm",children:s&&Object(k.jsxs)("div",{children:[Object(k.jsx)(R,{post:s}),c&&Object(k.jsxs)(M.a,{className:t.commentField,maxWidth:"sm",children:[Object(k.jsx)(D.a,{label:"Type Here",variant:"filled",multiline:!0,rows:"3",rowsMax:"3",size:"medium",fullWidth:!0,onChange:function(e){x(e.target.value)}}),Object(k.jsx)(m.a,{variant:"contained",size:"small",color:"primary",className:t.button,onClick:function(){var e;e=a,l.a.post("/api/post/add-comment",{postId:e,commentBody:u},{withCredentials:!0}).then((function(e){var t=s;t.comments.unshift({body:u,commenterName:"New Comment(From You)",_id:Math.random().toString()}),d(!1),d(t)})).catch((function(e){console.log(e)}))},children:"Comment"})]}),Object(k.jsx)(be,{comments:s.comments})]})})},pe=Object(d.a)((function(e){return{text:{},container:{background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)",borderRadius:"10px",marginTop:"20px",padding:"20px"}}})),me=function(){var e=pe(),t=z(),a=B();return Object(n.useEffect)((function(){l.a.get("/api/signout",{withCredentials:!0}).then((function(e){return 200===e.status&&t()})).catch((function(e){return console.error(e)}))}),[]),Object(k.jsxs)(M.a,{maxWidth:"sm",className:e.container,children:[a||Object(k.jsx)(W.a,{to:"/"}),Object(k.jsx)(h.a,{className:e.text,color:"textPrimary",align:"center",variant:"h3",children:"You will be redirected back to the main page"})]})},he=c.a.memo((function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){l.a.get("/api/user",{withCredentials:!0}).then((function(e){console.log(e),c(e.data.userInfo)})).catch((function(e){return console.log(e)}))}),[]),Object(k.jsxs)("div",{children:[a&&Object(k.jsx)(W.a,{to:"/user/".concat(a._id)})," "]})})),Oe=a(212),ge=a(213),fe=a(98),ve=a.n(fe),ye=a(210),we=a(99),Se=a(97),Ce=a.n(Se),Ne=a(95),ke=a(5),Te=a(96),Ie=a.n(Te),Be=Object(ke.a)({paper:{margin:"0px",padding:"0px",border:"1px solid #d3d4d5",height:"300px"}})((function(e){return Object(k.jsx)(we.a,Object(Ne.a)({elevation:5,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),ze=Object(ke.a)((function(e){return{root:{"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:"blue",margin:"0px",padding:"0px"}}}}))(ye.a);function Pe(e){var t=e.desktop,a=c.a.useState(null),n=Object(r.a)(a,2),i=n[0],o=n[1];return Object(k.jsxs)("div",{children:[Object(k.jsxs)(y.a,{id:"create-new-post","aria-controls":"customized-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},children:[t&&"New Post",Object(k.jsx)(Ie.a,{})]}),Object(k.jsx)(Be,{id:"customized-menu",anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:function(){o(null)},children:Object(k.jsx)(ze,{children:Object(k.jsx)(ne,{})})})]})}var We=a(211),Ee=Object(d.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{backgroundColor:"#283747"},websiteIcon:{position:"absolute",left:"43%",right:"auto",color:"white",top:0},userButtons:{marginRight:"0",marginLeft:"auto"},itemText:{textDecoration:"none",color:"white",marginRight:"0px",marginLeft:"auto"},createPost:{position:"absolute",left:"0%"}}}));function Re(){var e=Object(We.a)("(min-width:600px)"),t=Ee(),a=B();z();var n=c.a.useState(null),i=Object(r.a)(n,2),o=i[0],s=i[1],l=Boolean(o),d=function(){s(null)};return Object(k.jsx)("div",{className:t.root,children:Object(k.jsx)(Oe.a,{className:t.appBar,position:"static",children:Object(k.jsxs)(ge.a,{children:[a&&Object(k.jsx)(Pe,{desktop:e}),Object(k.jsx)(j.b,{id:"link-main-page",to:"/",children:Object(k.jsxs)(y.a,{className:t.websiteIcon,"aria-label":"button to feed",color:"inherit",children:[Object(k.jsx)(Ce.a,{})," ",e&&"Main Page"]})}),a?Object(k.jsxs)("div",{className:t.userButtons,children:[Object(k.jsx)(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",children:Object(k.jsx)(ve.a,{})}),Object(k.jsxs)(we.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:d,children:[Object(k.jsx)(j.b,{to:"/profile",children:Object(k.jsx)(ye.a,{onClick:d,children:"Profile"})}),Object(k.jsx)(j.b,{to:"/signout",children:Object(k.jsx)(ye.a,{onClick:d,children:"Sign Out"})})]})]}):Object(k.jsx)(j.b,{className:t.itemText,to:"/signin",children:Object(k.jsx)(h.a,{variant:"h6",children:"Sign In or Sign Up"})})]})})})}var Me=function(){return Object(k.jsx)(M.a,{align:"center",children:Object(k.jsx)(h.a,{variant:"h2",children:"404 - Not found"})})},Ae=a(214),Fe=Object(d.a)((function(e){var t=e.palette;return{card:{borderRadius:12,minWidth:256,maxWidth:400,textAlign:"center",marginTop:"19px",marginLeft:"auto",marginRight:"auto"},avatar:{width:60,height:60,margin:"auto"},heading:{fontSize:18,fontWeight:"bold",letterSpacing:"0.5px",marginTop:8,marginBottom:0},subheader:{fontSize:14,color:t.grey[500],marginBottom:"0.875em"},statLabel:{fontSize:12,color:t.grey[500],fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0},statValue:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}}})),Le=function(e){var t=Fe(),a=e.userInfo.userInfo;return console.log(a),Object(k.jsxs)(b.a,{className:t.card,children:[Object(k.jsxs)(p.a,{children:[Object(k.jsx)(v.a,{className:t.avatar,children:"?"}),Object(k.jsx)("h3",{className:t.heading,children:a?a.name:"loading..."})]}),Object(k.jsx)(de.a,{light:!0}),Object(k.jsxs)(Ae.a,{display:"flex",children:[Object(k.jsxs)(Ae.a,{p:2,flex:"auto",className:t.statBox,children:[Object(k.jsx)("p",{className:t.statLabel,children:"Posts"}),Object(k.jsx)("p",{className:t.statValue,children:a||"loading..."})]}),Object(k.jsxs)(Ae.a,{p:2,flex:"auto",className:t.statBox,children:[Object(k.jsx)("p",{className:t.statLabel,children:"Following"}),Object(k.jsx)("p",{className:t.statValue,children:"Coming Soon!"})]})]})]})},De=Object(d.a)({commentField:{position:"sticky",bottom:"0px",height:"80px"},gridItem:{},container:{marginTop:"20px"}}),Ue=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],i=Object(W.g)().user,o=De();return Object(n.useEffect)((function(){l.a.get("/api/user/".concat(i),{withCredentials:!0}).then((function(e){c(e.data)})).catch((function(e){return console.log(e)}))}),[]),Object(k.jsxs)(M.a,{className:o.container,maxWidth:"sm",children:[Object(k.jsx)(Le,{userInfo:a}),Object(k.jsx)(A.a,{container:!0,direction:"row",justify:"center",spacing:1,children:a&&a.userInfo.posts.map((function(e,t){return Object(k.jsx)(A.a,{item:!0,xs:12,children:Object(k.jsx)(R,{post:e})},"profilePost ".concat(t))}))})]})};var _e=function(){return Object(k.jsx)(P,{children:Object(k.jsx)(j.a,{children:Object(k.jsxs)("div",{children:[Object(k.jsx)(Re,{}),Object(k.jsxs)(W.d,{children:[Object(k.jsx)(W.b,{exact:!0,path:"/",children:Object(k.jsx)(L,{})}),Object(k.jsx)(W.b,{exact:!0,path:"/signin",children:Object(k.jsx)(te,{})}),Object(k.jsx)(W.b,{exact:!0,path:"/signout",children:Object(k.jsx)(me,{})}),Object(k.jsx)(W.b,{exact:!0,path:"/posts/:id",children:Object(k.jsx)(xe,{})}),Object(k.jsx)(W.b,{exact:!0,path:"/create-post",children:Object(k.jsx)(ne,{})}),Object(k.jsx)(W.b,{exact:!0,path:"/profile",children:Object(k.jsx)(he,{})}),Object(k.jsx)(W.b,{exact:!0,path:"/user/:user",children:Object(k.jsx)(Ue,{})}),Object(k.jsx)(W.b,{path:"/",children:Object(k.jsx)(Me,{})})]})]})})})};o.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(_e,{})}),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.15b52577.chunk.js.map