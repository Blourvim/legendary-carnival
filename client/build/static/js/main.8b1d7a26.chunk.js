(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(t,e,a){},124:function(t,e,a){},157:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),o=a(11),i=a.n(o),r=(a(123),a(124),a(7)),s=a(15),l=a.n(s),d=a(192),j=a(18),b=a(194),u=a(198),x=a(199),h=a(197),p=a(200),m=a(35),O=a(88),g=a.n(O),f=a(195),v=a(217),y=a(196),S=a(87),w=a.n(S),C=a(89),N=a.n(C),T=a(2),k=c.a.createContext(),I=c.a.createContext(),B=function(){return Object(n.useContext)(k)},E=function(){return Object(n.useContext)(I)},R=function(t){var e=t.children,a=Object(n.useState)(!1),c=Object(r.a)(a,2),o=c[0],i=c[1],s=function(){l.a.get("http://localhost:5000/user/validate",{withCredentials:!0}).then((function(t){401!==t.status?i(!0):i(!1)})).catch((function(t){console.log(t),i(!1)}))};return s(),Object(T.jsx)(k.Provider,{value:o,children:Object(T.jsx)(I.Provider,{value:s,children:e})})},W=a(12),P=Object(d.a)({root:{},cardAction:{display:"flex",flex:"1 0 auto",flexDirection:"column",textDecoration:"none",color:"black",fontWeight:"bold",marginTop:"5px",paddingTop:"0px"},card:{justifyContent:"start",display:"flex",flexDirection:"column",borderRadius:"10px",marginTop:"20px"},body:{wordWrap:"break-word"},actions:{display:"flex",justifyContent:"flex-start",background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)"},cardContent:{heigh:"300px",marginTop:"0px",paddingTop:"0px",paddingBottom:"0px",marginBotton:"0px"},cardHeader:{paddingBottom:"5px"}}),_=function(t){var e=P(),a=t.post,c=a.body,o=a.user,i=a._id,s=a.createdAt,d=a.comments,O=a.favoritesCount,S=Object(n.useState)(O),C=Object(r.a)(S,2),k=C[0],I=C[1],E=Object(n.useState)(!1),R=Object(r.a)(E,2),_=R[0],z=R[1],A=B();return Object(T.jsxs)(b.a,{className:e.card,children:[Object(T.jsx)(j.b,{className:e.cardAction,to:"/user/".concat(o._id),children:Object(T.jsx)(f.a,{className:e.cardHeader,avatar:Object(T.jsx)(v.a,{src:"https://picsum.photos/200","aria-label":"User"}),action:Object(T.jsx)(y.a,{"aria-label":"settings",children:Object(T.jsx)(w.a,{})}),title:Object(T.jsx)(m.a,{children:t.post.user.name}),subheader:s})}),Object(T.jsx)(j.b,{className:e.cardAction,to:"/posts/".concat(i),children:Object(T.jsx)(h.a,{className:e.cardContent,children:Object(T.jsx)(u.a,{children:Object(T.jsx)(m.a,{className:e.body,variant:"body2",color:"textPrimary",component:"p",children:c})})})}),Object(T.jsxs)(x.a,{className:e.actions,children:[!A&&_&&Object(T.jsx)(W.a,{to:"/signin"}),Object(T.jsxs)(p.a,{size:"small",color:"primary",onClick:function(){var t;t=i,A?(console.log(i+"liked"),l.a.post("".concat("http://localhost:5000","/post/like-post"),{postId:t},{withCredentials:!0}).then((function(t){console.log(t),"favorited"!==t.data?I(k-1):I(k+1)})).catch((function(t){console.log(t)}))):z(!0)},children:[Object(T.jsx)(g.a,{style:{color:"red"}}),k]}),Object(T.jsx)(j.b,{to:"/posts/".concat(i),children:Object(T.jsxs)(p.a,{size:"small",color:"primary",children:[Object(T.jsx)(N.a,{style:{color:"#8f80ee"}})," ",d.length]})})]})]},"body + ".concat(Math.random()))},z=a(201),A=a(202),D=Object(d.a)({commentField:{position:"sticky",bottom:"0px",height:"80px"},gridItem:{},container:{marginTop:"20px"}}),F=function(){var t=Object(n.useState)(!1),e=Object(r.a)(t,2),a=e[0],c=e[1],o=D();Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).URL;return Object(n.useEffect)((function(){l.a.get("/post/get-feed").then((function(t){console.log(t),c(t.data)}))}),[]),Object(T.jsx)(z.a,{maxWidth:"xs",className:o.container,children:Object(T.jsx)(A.a,{container:!0,direction:"row",justify:"center",spacing:1,children:a&&a.map((function(t,e){return Object(T.jsx)(A.a,{className:o.gridItem,item:!0,xs:12,children:Object(T.jsx)(_,{post:t})},e+t.body)}))})})},L=a(215),M=a(216),U=a(203),H=a(218),V=a(204),K=a(206),q=a(90),G=a.n(q),J=a(92),Y=a.n(J),Q=a(93),X=a.n(Q),Z=a(91),$=a.n(Z),tt=Object(d.a)((function(t){return{container:{marginTop:"25px",padding:"40px",background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)",borderRadius:"6px"},switch:{left:"0px",with:"100%"},switchText:{marginLeft:"17px"},root:{display:"grid","& > *":{margin:t.spacing(1)}}}})),et=function(){var t=tt(),e=Object(n.useState)(!0),a=Object(r.a)(e,2),c=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(r.a)(i,2),d=s[0],j=s[1],b=Object(n.useState)(!1),u=Object(r.a)(b,2),x=u[0],h=u[1],O=Object(n.useState)(!1),g=Object(r.a)(O,2),f=g[0],v=g[1],S=E(),w=Object(n.useState)(""),C=Object(r.a)(w,2),N=C[0],k=C[1],I=Object(n.useState)(!1),B=Object(r.a)(I,2),R=B[0],P=B[1],_=Object(n.useState)(!1),z=Object(r.a)(_,2),D=z[0],F=z[1],q=Object(n.useState)(""),J=Object(r.a)(q,2),Q=J[0],Z=J[1],et=Object(n.useState)(!1),at=Object(r.a)(et,2),nt=at[0],ct=at[1],ot=Object(n.useState)(!1),it=Object(r.a)(ot,2),rt=it[0],st=it[1],lt=Object(n.useState)(!1),dt=Object(r.a)(lt,2),jt=dt[0],bt=dt[1],ut="http://localhost:5000";return Object(T.jsxs)(A.a,{container:!0,justify:"center",children:[d&&Object(T.jsx)(W.a,{to:"/"}),Object(T.jsxs)("div",{className:t.container,children:[Object(T.jsx)(m.a,{align:"center",variant:"h3",children:c?"Sign In":"Sign Up"}),Object(T.jsx)(m.a,{className:t.switchText,color:"textPrimary",align:"right",variant:"p3",children:c?"Don't have an account ?":"Do you need to sign in ?"}),Object(T.jsx)(H.a,{className:t.switch,checked:c,onChange:function(){o(!c)},color:"primary",name:"switch",inputProps:{"aria-label":"sign in sign up checkbox"}}),Object(T.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c?l.a.post("".concat(ut,"/signin"),{username:t.target.email.value,password:t.target.password.value},{withCredentials:!0}).then((function(t){200===t.status&&(j(!0),S())})).catch((function(t){console.log(t),v(t.response.data.message)})):l.a.post("".concat(ut,"/signup"),{email:t.target.email.value,password:t.target.password.value,username:t.target.username.value},{withCredentials:!0}).then((function(t){o(!0)})).catch((function(t){var e,a,n,c;console.log(null===t||void 0===t||null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message),h(null===t||void 0===t||null===(n=t.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.message)}))},className:t.root,noValidate:!0,autoComplete:"off",children:[Object(T.jsx)(L.a,{onChange:function(t){k(t.target.value),N.length>4&&F(!0),G()(N)?P(!0):P(!1)},id:"filled-basic",name:"email",label:"E-Mail",required:!0,variant:"filled",error:!c&&!R&&D,helperText:!c&&D&&!R&&"Email is not valid"}),!c&&Object(T.jsx)(L.a,{id:"username-input",name:"username",label:"User Name",variant:"filled"}),Object(T.jsxs)(V.a,{helperText:"password is too short",variant:"filled",children:[Object(T.jsx)(M.a,{htmlFor:"filled-adornment-password",children:"Password"}),Object(T.jsx)(U.a,{name:"password",required:!0,id:"filled-adornment-password",type:jt?"text":"password",onChange:function(t){Z(t.target.value),Q.length>3&&st(!0),$()(Q,{min:8,max:32})?ct(!0):ct(!1)},error:!c&&!nt&&rt,endAdornment:Object(T.jsx)(K.a,{position:"end",children:Object(T.jsx)(y.a,{"aria-label":"toggle password visibility",onClick:function(){bt(!jt)},edge:"end",children:jt?Object(T.jsx)(Y.a,{}):Object(T.jsx)(X.a,{})})})})]}),Object(T.jsx)(p.a,{type:"submit",variant:"contained",align:"center",color:"secondary",children:c?"Sign In":"Sign Up"}),c&&f,!c&&x]})]})]})},at=Object(d.a)((function(t){return{container:{height:"190px",margin:"0px",padding:"40px",background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)"},switch:{left:"0px",margin:"0px"},root:{display:"grid","& > *":{margin:"0px"}},grid:{margin:"0px"}}})),nt=function(){var t=at(),e=Object(n.useState)(!1),a=Object(r.a)(e,2),c=a[0],o=a[1];return Object(T.jsx)(A.a,{className:t.grid,container:!0,justify:"center",children:Object(T.jsxs)("div",{className:t.container,children:[c&&Object(T.jsx)(W.a,{to:"/posts/".concat(c)}),Object(T.jsxs)("form",{onSubmit:function(t){t.preventDefault(),l.a.post("".concat("http://localhost:5000","/post/create"),{body:t.target.body.value},{withCredentials:!0}).then((function(t){o(t.data.docs._id)})).catch((function(t){console.log(t)}))},className:t.root,noValidate:!0,autoComplete:"off",children:[Object(T.jsx)(L.a,{autoFocus:!0,rowsMax:8,multiline:!0,id:"filled-basic",name:"body",label:"body",variant:"filled"}),Object(T.jsx)(p.a,{type:"submit",variant:"contained",align:"center",color:"secondary",children:"Create Post"})]})]})})},ct=a(205),ot=a(161),it=a(208),rt=a(207),st=a(94),lt=a.n(st),dt=a(209),jt=Object(d.a)((function(t){return{root:{width:"100%",backgroundColor:"hsl(194, 53.3%, 79%)",margin:"0 auto",borderRadius:"10px",marginTop:"20px"},body:{wordWrap:"break-word"}}})),bt=function(t){var e=jt();return Object(T.jsx)(T.Fragment,{children:0!==t.comments.length&&Object(T.jsx)(ct.a,{className:e.root,children:t.comments.map((function(e,a){return Object(T.jsxs)("div",{children:[Object(T.jsxs)(ot.a,{children:[Object(T.jsx)(rt.a,{children:Object(T.jsx)(v.a,{children:Object(T.jsx)(lt.a,{})})}),Object(T.jsx)(it.a,{id:"comment-special-case",primary:e.commenterName,secondary:e.body})]}),0!==t.comments.length&&t.comments.length-1!==a&&Object(T.jsx)(dt.a,{variant:"inset",component:"li"})]},e._id)}))})})},ut=Object(d.a)({root:{},cardAction:{display:"flex",flex:"1 0 auto",flexDirection:"column"},card:{marginTop:"30px"},body:{alignSelf:"end",textAlign:"center"},actions:{display:"flex",justifyContent:"flex-start"},commentField:{backgroundColor:"#b1e1cf",borderTopLeftRadius:"14px",borderTopRightRadius:"14px",paddingTop:"5%",marginTop:"20px"},button:{marginTop:"10px",marginBottom:"10px",padding:"8px",right:"-80%",left:"auto"}}),xt=function(t){var e=ut(),a=Object(W.g)().id,c=B(),o=Object(n.useState)(!1),i=Object(r.a)(o,2),s=i[0],d=i[1],j=Object(n.useState)(),b=Object(r.a)(j,2),u=b[0],x=b[1];Object(n.useEffect)((function(){l.a.get("".concat("http://localhost:5000","/post/").concat(a)).then((function(t){d(t.data)})).catch((function(t){console.log(t)}))}),[]);return Object(T.jsx)(z.a,{className:e.card,maxWidth:"sm",children:s&&Object(T.jsxs)("div",{children:[Object(T.jsx)(_,{post:s}),c&&Object(T.jsxs)(z.a,{className:e.commentField,maxWidth:"sm",children:[Object(T.jsx)(L.a,{label:"Type Here",variant:"filled",multiline:!0,rows:"3",rowsMax:"3",size:"medium",fullWidth:!0,onChange:function(t){x(t.target.value)}}),Object(T.jsx)(p.a,{variant:"contained",size:"small",color:"primary",className:e.button,onClick:function(){var t;t=a,l.a.post("".concat("http://localhost:5000","/post/add-comment"),{postId:t,commentBody:u},{withCredentials:!0}).then((function(t){var e=s;e.comments.unshift({body:u,commenterName:s.user.name,_id:Math.random().toString()}),d(!1),d(e)})).catch((function(t){console.log(t)}))},children:"Comment"})]}),Object(T.jsx)(bt,{comments:s.comments})]})})},ht=Object(d.a)((function(t){return{text:{},container:{background:"linear-gradient(90deg, rgba(220,215,240,1) 0%, rgba(201,229,245,1) 66%)",borderRadius:"10px",marginTop:"20px",padding:"20px"}}})),pt=function(){var t=ht(),e=E(),a=B();return Object(n.useEffect)((function(){l.a.get("http://localhost:5000/signout",{withCredentials:!0}).then((function(t){return 200===t.status&&e()})).catch((function(t){return console.error(t)}))}),[]),Object(T.jsxs)(z.a,{maxWidth:"sm",className:t.container,children:[a||Object(T.jsx)(W.a,{to:"/"}),Object(T.jsx)(m.a,{className:t.text,color:"textPrimary",align:"center",variant:"h3",children:"You will be redirected back to the main page"})]})},mt=c.a.memo((function(){var t=Object(n.useState)(!1),e=Object(r.a)(t,2),a=e[0],c=e[1];return Object(n.useEffect)((function(){l.a.get("http://localhost:5000/user",{withCredentials:!0}).then((function(t){console.log(t),c(t.data.userInfo)})).catch((function(t){return console.log(t)}))}),[]),Object(T.jsxs)("div",{children:[a&&Object(T.jsx)(W.a,{to:"/user/".concat(a._id)})," "]})})),Ot=a(212),gt=a(213),ft=a(98),vt=a.n(ft),yt=a(210),St=a(99),wt=a(97),Ct=a.n(wt),Nt=a(95),Tt=a(5),kt=a(96),It=a.n(kt),Bt=Object(Tt.a)({paper:{margin:"0px",padding:"0px",border:"1px solid #d3d4d5",height:"300px"}})((function(t){return Object(T.jsx)(St.a,Object(Nt.a)({elevation:5,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},t))})),Et=Object(Tt.a)((function(t){return{root:{"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:"blue",margin:"0px",padding:"0px"}}}}))(yt.a);function Rt(t){var e=t.desktop,a=c.a.useState(null),n=Object(r.a)(a,2),o=n[0],i=n[1];return Object(T.jsxs)("div",{children:[Object(T.jsxs)(y.a,{id:"create-new-post","aria-controls":"customized-menu","aria-haspopup":"true",onClick:function(t){i(t.currentTarget)},children:[e&&"New Post",Object(T.jsx)(It.a,{})]}),Object(T.jsx)(Bt,{id:"customized-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){i(null)},children:Object(T.jsx)(Et,{children:Object(T.jsx)(nt,{})})})]})}var Wt=a(211),Pt=Object(d.a)((function(t){return{root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1},appBar:{backgroundColor:"#283747"},websiteIcon:{position:"absolute",left:"43%",right:"auto",color:"white",top:0},userButtons:{marginRight:"0",marginLeft:"auto"},itemText:{textDecoration:"none",color:"white",marginRight:"0px",marginLeft:"auto"},createPost:{position:"absolute",left:"0%"}}}));function _t(){var t=Object(Wt.a)("(min-width:600px)"),e=Pt(),a=B();E();var n=c.a.useState(null),o=Object(r.a)(n,2),i=o[0],s=o[1],l=Boolean(i),d=function(){s(null)};return Object(T.jsx)("div",{className:e.root,children:Object(T.jsx)(Ot.a,{className:e.appBar,position:"static",children:Object(T.jsxs)(gt.a,{children:[a&&Object(T.jsx)(Rt,{desktop:t}),Object(T.jsx)(j.b,{id:"link-main-page",to:"/",children:Object(T.jsxs)(y.a,{className:e.websiteIcon,"aria-label":"button to feed",color:"inherit",children:[Object(T.jsx)(Ct.a,{})," ",t&&"Main Page"]})}),a?Object(T.jsxs)("div",{className:e.userButtons,children:[Object(T.jsx)(y.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){s(t.currentTarget)},color:"inherit",children:Object(T.jsx)(vt.a,{})}),Object(T.jsxs)(St.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:d,children:[Object(T.jsx)(j.b,{to:"/profile",children:Object(T.jsx)(yt.a,{onClick:d,children:"Profile"})}),Object(T.jsx)(yt.a,{onClick:d,children:"My account"}),Object(T.jsx)(j.b,{to:"/signout",children:Object(T.jsx)(yt.a,{onClick:d,children:"Sign Out"})})]})]}):Object(T.jsx)(j.b,{className:e.itemText,to:"/signin",children:Object(T.jsx)(m.a,{variant:"h6",children:"Sign In or Sign Up"})})]})})})}var zt=function(){return Object(T.jsx)(z.a,{align:"center",children:Object(T.jsx)(m.a,{variant:"h2",children:"404 - Not found"})})},At=a(214),Dt=Object(d.a)((function(t){var e=t.palette;return{card:{borderRadius:12,minWidth:256,maxWidth:400,textAlign:"center",marginTop:"19px",marginLeft:"auto",marginRight:"auto"},avatar:{width:60,height:60,margin:"auto"},heading:{fontSize:18,fontWeight:"bold",letterSpacing:"0.5px",marginTop:8,marginBottom:0},subheader:{fontSize:14,color:e.grey[500],marginBottom:"0.875em"},statLabel:{fontSize:12,color:e.grey[500],fontWeight:500,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',margin:0},statValue:{fontSize:20,fontWeight:"bold",marginBottom:4,letterSpacing:"1px"}}})),Ft=function(t){var e=Dt(),a=t.userInfo.userInfo;return console.log(a),Object(T.jsxs)(b.a,{className:e.card,children:[Object(T.jsxs)(h.a,{children:[Object(T.jsx)(v.a,{className:e.avatar,src:"https://i.pravatar.cc/300"}),Object(T.jsx)("h3",{className:e.heading,children:a?a.name:"loading..."})]}),Object(T.jsx)(dt.a,{light:!0}),Object(T.jsxs)(At.a,{display:"flex",children:[Object(T.jsxs)(At.a,{p:2,flex:"auto",className:e.statBox,children:[Object(T.jsx)("p",{className:e.statLabel,children:"Followers"}),Object(T.jsx)("p",{className:e.statValue,children:a?a.name:"loading..."})]}),Object(T.jsxs)(At.a,{p:2,flex:"auto",className:e.statBox,children:[Object(T.jsx)("p",{className:e.statLabel,children:"Following"}),Object(T.jsx)("p",{className:e.statValue,children:"12"})]})]})]})},Lt=Object(d.a)({commentField:{position:"sticky",bottom:"0px",height:"80px"},gridItem:{},container:{marginTop:"20px"}}),Mt=function(){var t=Object(n.useState)(!1),e=Object(r.a)(t,2),a=e[0],c=e[1],o=Object(W.g)().user,i=Lt();return Object(n.useEffect)((function(){l.a.get("".concat("http://localhost:5000","/user/").concat(o),{withCredentials:!0}).then((function(t){c(t.data)})).catch((function(t){return console.log(t)}))}),[]),Object(T.jsxs)(z.a,{className:i.container,maxWidth:"sm",children:[Object(T.jsx)(Ft,{userInfo:a}),Object(T.jsx)(A.a,{container:!0,direction:"row",justify:"center",spacing:1,children:a&&a.userInfo.posts.map((function(t,e){return Object(T.jsx)(A.a,{item:!0,xs:12,children:Object(T.jsx)(_,{post:t})},"profilePost ".concat(e))}))})]})};var Ut=function(){return Object(T.jsx)(R,{children:Object(T.jsx)(j.a,{children:Object(T.jsxs)("div",{children:[Object(T.jsx)(_t,{}),Object(T.jsxs)(W.d,{children:[Object(T.jsx)(W.b,{exact:!0,path:"/",children:Object(T.jsx)(F,{})}),Object(T.jsx)(W.b,{exact:!0,path:"/signin",children:Object(T.jsx)(et,{})}),Object(T.jsx)(W.b,{exact:!0,path:"/signout",children:Object(T.jsx)(pt,{})}),Object(T.jsx)(W.b,{exact:!0,path:"/posts/:id",children:Object(T.jsx)(xt,{})}),Object(T.jsx)(W.b,{exact:!0,path:"/create-post",children:Object(T.jsx)(nt,{})}),Object(T.jsx)(W.b,{exact:!0,path:"/profile",children:Object(T.jsx)(mt,{})}),Object(T.jsx)(W.b,{exact:!0,path:"/user/:user",children:Object(T.jsx)(Mt,{})}),Object(T.jsx)(W.b,{path:"/",children:Object(T.jsx)(zt,{})})]})]})})})};i.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(Ut,{})}),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.8b1d7a26.chunk.js.map